# Oxygen Monitoring System

## üìå –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **MVC** –∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤**.  

### –û–±—â–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã

```text
+------------------+          +-------------------+         +------------------+
|   ESP (Arduino)  |   REST   |   API Gateway     |  REST   |  Frontend (React)|
| [Oxygen Sensor]  +--------->+  - Auth routing   +<------->+  (Login, Dashboard|
|  JSON data       |          |  - Sensor routing |         |  Device Mgmt UI) |
+------------------+          +---------+---------+         +------------------+
                                       |
                                       v
                           +-----------------------+
                           |  Auth Service (C#)    |
                           |  - Users, JWT tokens  |
                           +-----------------------+
                                       |
                           +-----------------------+
                           | Sensor Service (C#)   |
                           | - Save oxygen data    |
                           | - Manage devices      |
                           +-----------------------+
                                       |
                           +-----------------------+
                           |   Database (SQL)      |
                           | users, devices, data  |
                           +-----------------------+
+-------------------+
|      Users        |
+-------------------+
| user_id (PK)      |
| username          |
| password_hash     |
| role              |
| created_at        |
+-------------------+

+-------------------+
|     Devices       |
+-------------------+
| device_id (PK)    |
| device_name       |
| location          |
| owner_id (FK) -> Users.user_id
| created_at        |
+-------------------+

+-------------------+
|   Measurements    |
+-------------------+
| measure_id (PK)   |
| device_id (FK) -> Devices.device_id
| oxygen_level      |
| timestamp         |
+-------------------+

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å.  
2. –ó–∞–ø—Ä–æ—Å ‚Üí POST /api/auth/login  
3. Auth Service –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ Users.  
4. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω.  
5. –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ Sensor Service) –∏–¥—É—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º:  

Authorization: Bearer <jwt_token>

+-------------------------------------+
|             Login Form              |
+-------------------------------------+
|  Username: [______________]         |
|  Password: [______________]         |
|                                     |
|  [ Login Button ]                   |
|                                     |
|  -> POST /api/auth/login            |
|     (–≤–æ–∑–≤—Ä–∞—Ç JWT —Ç–æ–∫–µ–Ω–∞)            |
+-------------------------------------+

1. ESP —Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–∞ –∫–∏—Å–ª–æ—Ä–æ–¥–∞.  
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON –ø–æ REST ‚Üí Sensor Service (C#).  
3. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ SQL –ë–î.  
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ Auth Service (C#).  
5. React UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏.  
